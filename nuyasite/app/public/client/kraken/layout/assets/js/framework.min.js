function ajaxPost(id, url, tohide, redirect, info, sth) 
{
    if (tohide === undefined)
    {
        tohide = id;
    }

    if (info === undefined) 
    {
        info = ".message";
    }

    $(document).ready(function() 
    {
        $(id).submit(function() 
        {
            $('#preloader').removeClass('hidden');
            setTimeout(function() 
            {
                $.post(base_url + url, $(id).serialize(), function(data) 
                {
                    try
                    {
                        var data = JSON.parse(data);
                    }

                    catch (e)
                    {
                        $('#preloader').addClass('hidden');
                        $(info).html('<div class="alert alert-danger">Wystąpił pewien problem, spróbuj ponownie później.</div>');
                        return false;
                    }

                    $(info).fadeIn('slow');
                    $(info).html(data.error);

                    if (data.success === true) 
                    {
                        $(tohide).hide("slow", "linear");
                        if (typeof data.redirect != 'undefined') 
                        {
                            setTimeout(function() 
                            {
                                window.location = data.redirect;
                            }, 2100);
                        }

                        if (redirect !== undefined)
                        {
                            setTimeout(function()
                            {
                                window.location = base_url + redirect;
                            }, 2000);
                        }
                    }

                    $('#preloader').addClass('hidden');
                    if (sth !== undefined) 
                    {
                        sth();
                    }
                })
            }, 500);
            return false;
        });
    });
};

$(document).ready(function() 
{ 
	$('select').niceSelect();
});