<?php    /**     * Created by PhpStorm.     * User: user     * Date: 11.05.2017     * Time: 12:22     */    use Model\IN_Model;    class SocketModel extends IN_Model    {        public function dcset()        {            $stat = $this->filter->numberFilter($_POST['stat']);            $name = $this->filter->mainFilter($_POST['name']);            if ($stat == '' || $name == ''){                $result['result'] = false;            }else{                if ($stat == '1'){                    $control = $this->gdb->select('account_id,name')->table(''.PLAYER_DB_NAME.'.player')->where(array('name'=>$name));                    if ($control->count() < 1){                        $result['result'] = false;                    }else{                        Functions::sendServer($name,"DC");                        Functions::setAdminLog("$name isimli kullanıcıya DC attı");                        $result['result'] = true;                    }                }            }            echo json_encode($result);        }        public function chatset()        {            $time = filter_var($_POST['time'],FILTER_SANITIZE_STRING);            $name = $this->filter->mainFilter($_POST['name']);            if ($time == '' || $name == ''){                $result['result'] = false;            }else{                $control = $this->gdb->select('name')->table(''.PLAYER_DB_NAME.'.player')->where(array('name'=>$name));                if ($control->count() < 1){                    $result['result'] = false;                }else{                    Functions::sendServer($name.' '.$time,"BLOCK_CHAT");                    Functions::setAdminLog("$name isimli kullanıcıya $time süre chat ban attı");                    $result['result'] = true;                }            }            echo json_encode($result);        }        public function noticeset()		{            $notice = filter_var($_POST['notice'],FILTER_SANITIZE_STRING);            if ($notice == ''){                $result['result'] = false;            }elseif (strlen($notice) > 100){                $result['result'] = false;            }else{                if ($_POST['type'] == 1)					Functions::sendServer($notice);				else					Functions::sendServer($notice,"BNOTICE");                Functions::setAdminLog("$notice Duyuru geçti");                $result['result'] = true;            }            echo json_encode($result);        }		public function playset()		{            $play = filter_var($_POST['play'],FILTER_SANITIZE_STRING);            if ($play == ''){                $result['result'] = false;            }elseif (strlen($play) > 100){                $result['result'] = false;            }else{                Functions::sendServer($play,"PLAY");                Functions::setAdminLog("$play numaralı müzik açıldı");                $result['result'] = true;            }            echo json_encode($result);        }        public function drop_open()		{			$flag = $this->filter->numberFilter($_POST['flag']);			$type = $this->filter->numberFilter($_POST['type']);			$percent = $this->filter->numberFilter($_POST['percent']);			$time = $this->filter->numberFilter($_POST['time']);			if ($flag === false || $type === false || $percent === false || $time === false)				$result = false;			else			{				if ($type === '0')				{					Functions::sendServer("0 1 $percent $time","PRIV_EMPIRE");					Functions::sendServer("0 2 $percent $time","PRIV_EMPIRE");					Functions::sendServer("0 3 $percent $time","PRIV_EMPIRE");					Functions::sendServer("0 4 $percent $time","PRIV_EMPIRE");				}				else					Functions::sendServer("$flag $type $percent $time","PRIV_EMPIRE");				$result = true;			}			echo json_encode($result);		}    }